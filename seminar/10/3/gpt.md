–î–ª—è –∑–∞–¥–∞—á–∏, –≥–¥–µ –Ω—É–∂–Ω–æ:

1. –î–æ–±–∞–≤–ª—è—Ç—å —Ä—ë–±—Ä–∞ –≤ **–ø—É—Å—Ç–æ–π –≥—Ä–∞—Ñ** (—Ç–æ –µ—Å—Ç—å –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –≤–µ—Ä—à–∏–Ω—ã, –±–µ–∑ —Ä—ë–±–µ—Ä),
2. –ò –ø–æ –∑–∞–ø—Ä–æ—Å—É –Ω–∞—Ö–æ–¥–∏—Ç—å **–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—ë–±–µ—Ä** –≤ **–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —Å–≤—è–∑–Ω–æ—Å—Ç–∏**, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–µ—Ä—à–∏–Ω–∞ `x`,

‚Äî –º—ã –º–æ–∂–µ–º —Å–Ω–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–°–ù–ú (Disjoint Set Union, DSU)**, –Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å **–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—ë–±–µ—Ä** –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

---

## üß† –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:

* –í DSU –∫–∞–∂–¥–∞—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å:

   * `size` ‚Äî —á–∏—Å–ª–æ –≤–µ—Ä—à–∏–Ω –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ,
   * `edges` ‚Äî **–æ–±—â–µ–µ —á–∏—Å–ª–æ —Ä—ë–±–µ—Ä**, —Å–æ–µ–¥–∏–Ω—è—é—â–∏—Ö –≤–µ—Ä—à–∏–Ω—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

---

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

–ú—ã –¥–æ–±–∞–≤–∏–º –º–∞—Å—Å–∏–≤ `edges[root]`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —á–∏—Å–ª–æ —Ä—ë–±–µ—Ä –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —á—å–∏–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–º —è–≤–ª—è–µ—Ç—Å—è `root`.

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ä–µ–±—Ä–∞ `(u, v)`:

* –µ—Å–ª–∏ `u` –∏ `v` –≤ **—Ä–∞–∑–Ω—ã—Ö** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö ‚Äî –æ–±—ä–µ–¥–∏–Ω–∏–º –∏—Ö, –∏ —Å—É–º–º–∞ —Ä—ë–±–µ—Ä –±—É–¥–µ—Ç `edges[u] + edges[v] + 1`,
* –µ—Å–ª–∏ `u` –∏ `v` –≤ **–æ–¥–Ω–æ–π** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ ‚Äî —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º **–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–µ–±—Ä–æ**, —É–≤–µ–ª–∏—á–∏–≤–∞—è `edges[root]` –Ω–∞ 1.

---

## ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Java:

```java
public class DisjointSet {
    private int[] parent;
    private int[] size;
    private int[] edges;

    public DisjointSet(int n) {
        parent = new int[n];
        size = new int[n];
        edges = new int[n];
        for (int i = 0; i < n; i++) {
            parent[i] = i;
            size[i] = 1;
            edges[i] = 0;
        }
    }

    public int find(int x) {
        if (x != parent[x]) {
            parent[x] = find(parent[x]); // path compression
        }
        return parent[x];
    }

    public void addEdge(int u, int v) {
        int ru = find(u);
        int rv = find(v);

        if (ru == rv) {
            // —É–∂–µ –≤ –æ–¥–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ ‚Äî –ø—Ä–æ—Å—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —á–∏—Å–ª–æ —Ä—ë–±–µ—Ä
            edges[ru]++;
        } else {
            // –æ–±—ä–µ–¥–∏–Ω—è–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
            if (size[ru] < size[rv]) {
                int temp = ru;
                ru = rv;
                rv = temp;
            }

            parent[rv] = ru;
            size[ru] += size[rv];
            edges[ru] += edges[rv] + 1; // –¥–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤–æ–µ —Ä–µ–±—Ä–æ
        }
    }

    public int getEdgeCount(int x) {
        return edges[find(x)];
    }
}
```

---

## üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```java
public class Main {
    public static void main(String[] args) {
        int n = 6;
        DisjointSet dsu = new DisjointSet(n);

        dsu.addEdge(0, 1);
        dsu.addEdge(1, 2);
        dsu.addEdge(3, 4);
        dsu.addEdge(2, 0); // –∑–∞–º—ã–∫–∞–µ–º —Ü–∏–∫–ª

        System.out.println("Edges in component of 0: " + dsu.getEdgeCount(0)); // 3
        System.out.println("Edges in component of 3: " + dsu.getEdgeCount(3)); // 1

        dsu.addEdge(2, 3); // —Å–æ–µ–¥–∏–Ω—è–µ–º –¥–≤–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
        System.out.println("Edges in component of 4: " + dsu.getEdgeCount(4)); // 5
    }
}
```

---

### üì§ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞:

* –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `{0,1,2}` –ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö —Ç—Ä—ë—Ö —Ä—ë–±–µ—Ä –∏–º–µ–µ—Ç 2 —Ä–µ–±—Ä–∞.
* –ß–µ—Ç–≤—ë—Ä—Ç—ã–º —Ä–µ–±—Ä–æ–º `(2, 0)` –º—ã –¥–æ–±–∞–≤–ª—è–µ–º —Ü–∏–∫–ª ‚Äî —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 3 —Ä–µ–±—Ä–∞.
* –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `{3,4}` –∏–º–µ–µ—Ç 1 —Ä–µ–±—Ä–æ.
* –ü–æ—Å–ª–µ `addEdge(2, 3)` –≤—Å–µ –æ–Ω–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è, –∏ –æ–±—â–µ–µ —á–∏—Å–ª–æ —Ä—ë–±–µ—Ä ‚Äî 3 (–ø–µ—Ä–≤–∞—è) + 1 (–≤—Ç–æ—Ä–∞—è) + 1 (–Ω–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω—è—é—â–µ–µ) = **5**.

---

–•–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤–≤–æ–¥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∫–æ–º–∞–Ω–¥ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `"ADD 1 2"` –∏–ª–∏ `"COUNT 2"`)?
