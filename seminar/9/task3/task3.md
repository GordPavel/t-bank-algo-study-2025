Даны n прямоугольников, заданных координатами своих концов. Найти общую площадь их объединения за Opn log nq.

Для решения задачи о нахождении общей площади объединения n прямоугольников с использованием ленивого дерева отрезков, мы можем использовать подход, который включает в себя:

События: Мы будем обрабатывать события начала и конца каждого прямоугольника.
Ленивое дерево отрезков: Используется для хранения текущих активных отрезков по оси Y и для вычисления общей высоты активных отрезков.
Сканирующая линия: Мы будем перемещаться по оси X и обновлять активные отрезки по оси Y.

Описание кода:
Класс Rectangle: Представляет прямоугольник с координатами его концов.
Класс Event: Представляет событие начала или конца прямоугольника.
Класс SegmentTree: Реализует ленивое дерево отрезков для хранения и обновления высот активных отрезков.
Метод apply применяет отложенные обновления.
Метод update обновляет диапазон высот.
Метод query возвращает текущую высоту.
Метод calculateUnionArea: Основной метод, который вычисляет общую площадь объединения прямоугольников.
События сортируются по координате x.
Используется сканирующая линия для вычисления площади.