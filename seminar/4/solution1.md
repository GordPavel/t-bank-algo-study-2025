Задача RSQ Online . Нужно находить сумму на отрезке или в прямоугольнике и т.д. за O(1). Для одномерного случая, я
помню, что можно использовать префиксные суммы. То есть создаем массив, где каждый элемент prefix[i] равен сумме
элементов исходного массива от 0 до i-1. Тогда сумма на отрезке [l, r] будет prefix[r+1] - prefix[l]. Это действительно
O(1) после предподсчета префиксных сумм.
Для двумерного случая, наверное, нужна двумерная префиксная сумма. Формула для суммы в прямоугольнике (x1,y1)-(x2,y2)
будет использовать принцип включения-исключения. Например, sum = prefix[x2][y2] - prefix[x1-1][y2] - prefix[x2][y1-1] +
prefix[x1-1][y1-1]. Тогда предподсчет такой матрицы займет O(n^2), а запросы O(1).

Трехмерный случай аналогичен, но с большими индексами. Префиксная сумма для параллелепипеда будет включать восемь
слагаемых, в зависимости от комбинаций координат. Например, sum = prefix[x2][y2][z2] - prefix[x1-1][y2][z2] - ... +
prefix[x1-1][y1-1][z1-1]. Это тоже O(1) на запрос после предподсчета.

Для m-мерного случая, видимо, нужно обобщить префиксные суммы на m измерений. Каждая гиперсумма будет вычисляться как
сумма по всем подмножествам угловых точек с соответствующими знаками. Но реализация может быть сложной, особенно для
произвольного m. Возможно, здесь нужно использовать рекурсию или итеративный подход для каждого измерения.



